
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Sean Dougherty</title>
  <meta name="author" content="Sean Dougherty">

  
  <meta name="description" content="No really, I suck at git. Give me too much rope and, well, you know&hellip; The other day, at work, I got myself into GIT trouble. This happens once &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://steam.github.io/blog">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Sean Dougherty" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Noto+Serif:400,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-40996992-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Sean Dougherty</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  
  
</ul>

<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/products/">Products</a></li>
  <li><a href="/work-history/">Work History</a></li>
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/archives/">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/10/02/i-suck-at-git/">I Suck at Git</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-10-02T21:57:00-06:00" pubdate data-updated="true">Oct 2<span>nd</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>No really, I <strong><em>suck</em></strong> at git.</h2>

<h4>Give me too much rope and, well, you know&hellip;</h4>

<p>The other day, at work, I got myself into GIT trouble. This happens once or twice a year. I&rsquo;ll get clever, attempt something above my git pay grade, foul things up royally, and eventually call in an expert. Often times this is Jay. In this case it was my co-worker Colin.</p>

<h4>What did my git fat fingers screw up?</h4>

<p>I&rsquo;m so glad you asked. Apple recently released Xcode 8. A requirement of using Swift and Xcode 8 (out of the box) is that your code must be Swift 2.3 or Swift 3.0. Up until the move to Xcode 8 Ello&rsquo;s iOS codebase was written in the production version of Swift, 2.2. Like a good git citizen, I created a topic branch from <code>master</code> named <code>sd/swift-2-dot-3</code>. Brilliant. No problems yet.</p>

<p>The conversion of over 50k lines of Swift 2.2 to Swift 2.3 ended up being a bigger task than originally planned. Not entirely surprising but we had other &ldquo;real&rdquo; work to do. We decided to branch off of <code>sd/swift-2-dot-3</code> for all feature work happening at the same time. For example, when adding <strong>Awesome Widget</strong> we&rsquo;d simply <code>git co sd/swift-2-dot-3</code> followed with <code>git co -b sd/feature/awesome-widget</code>.</p>

<h4>No big deal</h4>

<p>During the conversion process we needed to push a hot fix for a bug found on a version of the app that was based off of the Swift 2.2 <code>master</code> branch. We made the change, submitted a build to the AppStore and continued working on Swift 2.3 features.</p>

<h4>Horror</h4>

<p>The problem came when decided to rebase <code>sd/swift-2-dot-3</code> onto <code>master</code>. Bad Sean. I&rsquo;ve been told by many people, Colin included, that I should not be rebasing. Ever. I like rebasing because I want my commits to come after all the vetted commits in <code>master</code>.</p>

<p>Folks like Colin say that rebasing is not in the spirit of git. I&rsquo;m pretty sure he sent me a Linus Torvalds rant echoing the same. Spirit schmirit. The other argument for not rebasing anything public, and the one that actually matters to me, is that it can create an ungodly mess. I now agree with this wholeheartedly.</p>

<h4>Back to my blunder</h4>

<p>The negative effects of my rebasing <code>sd/swift-2-dot-3</code> onto <code>master</code> were not immediately apparent. We eventually merged several GitHub pull requests into <code>sd/swift-2-dot-3</code> and planned to distribute an internal TestFlight build of the app. Before I sent it live Colin messaged me in Slack.</p>

<p><img src="/assets/colin-git.jpg" alt="Missing Commits" /></p>

<h4>Uh oh</h4>

<p>I hadn&rsquo;t even noticed.</p>

<p>The issue ended up being (we think) that Github&rsquo;s pull requests (a GitHub feature, not a git feature) lock the base branch to merge into directly to an individual commit, not to the branch. Rebasing <code>sd/swift-2-dot-3</code> onto <code>master</code> does not change the commit that <code>My Awesome Pull Request</code> will be merged into if the pull request was created prior to the rebase. This should have been obvious but it wasn&rsquo;t. The pull request merge will continue to be merged into the original commit associated with the base branch, <code>sd/swift-2-dot-3</code> in this case. It will not be merged into the completely rewritten commit history of <code>sd/swift-2-dot-3</code> as it exists after the rebase. It gets merged into a commit that is no longer relevant to the rebased branch. This effectively orphans the merge.</p>

<h3>Moral of the story</h3>

<p>Don&rsquo;t rebase anything other people are working with. Especially don&rsquo;t rebase a branch that has other un-merged branches off of it. You&rsquo;ll feel stupid and make a ton of extra work for yourself, or for Colin since he is the one who will inevitably end up fixing it for you when you stare at your screen in horror.</p>

<h3>How to fix it?</h3>

<p><a href="https://git-scm.com/docs/git-cherry-pick"><code>git cherry-pick</code></a> is your friend here. We ended up identifying each missing commit and cherry picked them (in original order) into a new branch created from <code>master</code> which had the merged <code>sd/swift-2-dot-3</code> code. Then we submitted a new <a href="https://github.com/ello/ello-ios/pull/156">pull request</a> for all of the open-source world to see :).</p>

<p>I&rsquo;ve fought Colin on the whole &ldquo;rebase vs merge&rdquo; debate for a long time. I took my licks on this one. I have a few other git-gotchas to talk about in the future. Believe it or not, this is not my first (or last) time sucking at git.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/06/23/animate-between-competing-constraints/">Animate Between Competing Constraints</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-06-23T08:27:00-06:00" pubdate data-updated="true">Jun 23<span>rd</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I recently learned a new approach to animating two competing <code>NSLayoutConstraint</code>&rsquo;s.</p>

<p><strong>Problem</strong></p>

<p>Add a subview to a container and animate the subview from left to right using Auto Layout.</p>

<p><img src="/assets/layout-animation.gif" alt="Animating Box" /></p>

<p><strong>Solution</strong></p>

<ol>
<li>Pin the leading edge of the pink box to it&rsquo;s container. Set it&rsquo;s <code>priority</code> to 999.</li>
<li>Pin the trailing edge of the pink box to it&rsquo;s container. Set it&rsquo;s <code>priority</code> to 998.</li>
<li>Swap the priorities of the leading and trailing constraints in the animation block.</li>
</ol>


<figure class='code'><figcaption><span>AnimatePinning.playground</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="cm">/*</span>
</span><span class='line'><span class="cm"> Experiment that animates a red square left to right in a container</span>
</span><span class='line'><span class="cm"> by swapping the priority of the left and right layout constraints</span>
</span><span class='line'><span class="cm">*/</span>
</span><span class='line'>
</span><span class='line'><span class="n">import</span> <span class="n">UIKit</span>
</span><span class='line'><span class="n">import</span> <span class="n">XCPlayground</span>
</span><span class='line'>
</span><span class='line'><span class="n">let</span> <span class="n">container</span> <span class="o">=</span> <span class="n">UIView</span><span class="p">(</span><span class="nl">frame:</span> <span class="n">CGRectZero</span><span class="p">)</span>
</span><span class='line'><span class="n">container</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="p">.</span><span class="n">cyanColor</span><span class="p">()</span>
</span><span class='line'><span class="n">container</span><span class="p">.</span><span class="n">translatesAutoresizingMaskIntoConstraints</span> <span class="o">=</span> <span class="n">false</span>
</span><span class='line'>
</span><span class='line'><span class="n">let</span> <span class="n">inner</span> <span class="o">=</span> <span class="n">UIView</span><span class="p">(</span><span class="nl">frame:</span> <span class="n">CGRectZero</span><span class="p">)</span>
</span><span class='line'><span class="n">inner</span><span class="p">.</span><span class="n">translatesAutoresizingMaskIntoConstraints</span> <span class="o">=</span> <span class="n">false</span>
</span><span class='line'><span class="n">inner</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="p">.</span><span class="n">magentaColor</span><span class="p">()</span>
</span><span class='line'><span class="n">container</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">inner</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">let</span> <span class="n">innerWidth</span> <span class="o">=</span> <span class="n">NSLayoutConstraint</span><span class="p">(</span>
</span><span class='line'>    <span class="nl">item:</span> <span class="n">inner</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">attribute:</span> <span class="p">.</span><span class="n">Width</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">relatedBy:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">toItem:</span> <span class="nb">nil</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">attribute:</span> <span class="p">.</span><span class="n">NotAnAttribute</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">multiplier:</span> <span class="mf">1.0</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">constant:</span> <span class="mi">200</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">let</span> <span class="n">innerHeight</span> <span class="o">=</span> <span class="n">NSLayoutConstraint</span><span class="p">(</span>
</span><span class='line'>    <span class="nl">item:</span> <span class="n">inner</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">attribute:</span> <span class="p">.</span><span class="n">Height</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">relatedBy:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">toItem:</span> <span class="nb">nil</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">attribute:</span> <span class="p">.</span><span class="n">NotAnAttribute</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">multiplier:</span> <span class="mf">1.0</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">constant:</span> <span class="mi">200</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">let</span> <span class="n">containerWidth</span> <span class="o">=</span> <span class="n">NSLayoutConstraint</span><span class="p">(</span>
</span><span class='line'>    <span class="nl">item:</span> <span class="n">container</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">attribute:</span> <span class="p">.</span><span class="n">Width</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">relatedBy:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">toItem:</span> <span class="nb">nil</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">attribute:</span> <span class="p">.</span><span class="n">NotAnAttribute</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">multiplier:</span> <span class="mf">1.0</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">constant:</span> <span class="mi">500</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">let</span> <span class="n">containerHeight</span> <span class="o">=</span> <span class="n">NSLayoutConstraint</span><span class="p">(</span>
</span><span class='line'>    <span class="nl">item:</span> <span class="n">container</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">attribute:</span> <span class="p">.</span><span class="n">Height</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">relatedBy:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">toItem:</span> <span class="nb">nil</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">attribute:</span> <span class="p">.</span><span class="n">NotAnAttribute</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">multiplier:</span> <span class="mf">1.0</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">constant:</span> <span class="mi">300</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">let</span> <span class="n">top</span> <span class="o">=</span> <span class="n">NSLayoutConstraint</span><span class="p">(</span>
</span><span class='line'>    <span class="nl">item:</span> <span class="n">inner</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">attribute:</span> <span class="p">.</span><span class="n">Top</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">relatedBy:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">toItem:</span> <span class="n">container</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">attribute:</span> <span class="p">.</span><span class="n">Top</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">multiplier:</span> <span class="mf">1.0</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">constant:</span> <span class="mi">50</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* </span>
</span><span class='line'><span class="cm"> 1. Pin the leading edge of the pink box to it&#39;s container.</span>
</span><span class='line'><span class="cm">    Set it&#39;s `priority` to 999.</span>
</span><span class='line'><span class="cm">*/</span>
</span><span class='line'><span class="n">let</span> <span class="n">left</span> <span class="o">=</span> <span class="n">NSLayoutConstraint</span><span class="p">(</span>
</span><span class='line'>    <span class="nl">item:</span> <span class="n">inner</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">attribute:</span> <span class="p">.</span><span class="n">Leading</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">relatedBy:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">toItem:</span> <span class="n">container</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">attribute:</span> <span class="p">.</span><span class="n">Leading</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">multiplier:</span> <span class="mf">1.0</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">constant:</span> <span class="mi">0</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'><span class="n">left</span><span class="p">.</span><span class="n">priority</span> <span class="o">=</span> <span class="mi">999</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/*</span>
</span><span class='line'><span class="cm">  2. Pin the trailing edge of the pink box to it&#39;s container. </span>
</span><span class='line'><span class="cm">     Set it&#39;s `priority` to 998.</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="n">let</span> <span class="n">right</span> <span class="o">=</span> <span class="n">NSLayoutConstraint</span><span class="p">(</span>
</span><span class='line'>    <span class="nl">item:</span> <span class="n">inner</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">attribute:</span> <span class="p">.</span><span class="n">Trailing</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">relatedBy:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">toItem:</span> <span class="n">container</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">attribute:</span> <span class="p">.</span><span class="n">Trailing</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">multiplier:</span> <span class="mf">1.0</span><span class="p">,</span>
</span><span class='line'>    <span class="nl">constant:</span> <span class="mi">0</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'><span class="n">right</span><span class="p">.</span><span class="n">priority</span> <span class="o">=</span> <span class="mi">998</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">NSLayoutConstraint</span><span class="p">.</span><span class="n">activateConstraints</span><span class="p">([</span>
</span><span class='line'>    <span class="n">innerWidth</span><span class="p">,</span>
</span><span class='line'>    <span class="n">innerHeight</span><span class="p">,</span>
</span><span class='line'>    <span class="n">containerWidth</span><span class="p">,</span>
</span><span class='line'>    <span class="n">containerHeight</span><span class="p">,</span>
</span><span class='line'>    <span class="n">top</span><span class="p">,</span>
</span><span class='line'>    <span class="n">left</span><span class="p">,</span>
</span><span class='line'>    <span class="n">right</span>
</span><span class='line'><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">// animate the inner square left -&gt; right -&gt; left</span>
</span><span class='line'><span class="c1">// by swapping the left and right constraint priorities</span>
</span><span class='line'><span class="n">func</span> <span class="n">animate</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">UIView</span><span class="p">.</span><span class="n">animateWithDuration</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="nl">animations:</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">let</span> <span class="n">prevRight</span> <span class="o">=</span> <span class="n">right</span><span class="p">.</span><span class="n">priority</span>
</span><span class='line'>        <span class="n">let</span> <span class="n">prevLeft</span> <span class="o">=</span> <span class="n">left</span><span class="p">.</span><span class="n">priority</span>
</span><span class='line'>
</span><span class='line'>        <span class="cm">/*</span>
</span><span class='line'><span class="cm">          3. Swap the priorities of the two constraints</span>
</span><span class='line'><span class="cm">             in the animation block</span>
</span><span class='line'><span class="cm">        */</span>
</span><span class='line'>        <span class="n">left</span><span class="p">.</span><span class="n">priority</span> <span class="o">=</span> <span class="n">prevRight</span>
</span><span class='line'>        <span class="n">right</span><span class="p">.</span><span class="n">priority</span> <span class="o">=</span> <span class="n">prevLeft</span>
</span><span class='line'>        <span class="n">container</span><span class="p">.</span><span class="n">layoutIfNeeded</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>        <span class="p">},</span> <span class="nl">completion:</span> <span class="p">{</span> <span class="k">if</span> <span class="n">$0</span> <span class="p">{</span> <span class="n">animate</span><span class="p">()</span> <span class="p">}})</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">animate</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="n">XCPlaygroundPage</span><span class="p">.</span><span class="n">currentPage</span><span class="p">.</span><span class="n">needsIndefiniteExecution</span> <span class="o">=</span> <span class="n">true</span>
</span><span class='line'><span class="n">XCPlaygroundPage</span><span class="p">.</span><span class="n">currentPage</span><span class="p">.</span><span class="n">liveView</span> <span class="o">=</span> <span class="n">container</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/06/22/open-sourcing-ellos-ios-app/">Open Sourcing Ello&#8217;s iOS App</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-06-22T22:50:00-06:00" pubdate data-updated="true">Jun 22<span>nd</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A couple weeks ago we open sourced <a href="https://github.com/ello/ello-ios">Ello&rsquo;s iOS App</a>.</p>

<blockquote><p>The iOS app constitutes the largest codebase in the Ello ecosystem right now &ndash; at 57,391 lines of Swift, it just barely edges out the 55,911 lines of Ruby in our Rails backend, and it’s almost twice as big as the 29,827 lines of JS in our React webapp.</p></blockquote>

<p>We&rsquo;ve wanted to do this for many months and finally found the time to get the repository into public form. I hope it&rsquo;s as useful of a resource for others as the other great open source projects have been for me. Jay Zeschin and I posted about it on Ello today. You can read the full post here:
<a href="https://ello.co/sean/post/eobkyhj79p8yzol7it_1ew">https://ello.co/sean/post/eobkyhj79p8yzol7it_1ew</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/31/big-o-notation/">Big-O Notation</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-05-31T11:39:00-06:00" pubdate data-updated="true">May 31<span>st</span>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Any time a blog post, colleague or programming book uses big O notation I glance at it, record some general impression of the function/algorithm&rsquo;s performance and move on. I know that big O notation describes how the rate of computation time changes as the input size grows. Or more simply put, big O communicates the efficiency of a function. What I&rsquo;ve been missing are the specifics about how an algorithm&rsquo;s big O notation is calculated and when one algorithm is more preferable to another.</p>

<p>Big O describes the efficiency of an algorithm when it operates on an arbitrarily large set of data and describe a &lsquo;worst case&rsquo; scenario. Often times the performance characteristics of an algorithm are different for smaller sets of data.</p>

<p>At the most efficient end of the spectrum are <em><em>constant time</em></em> algorithms. These are functions that (basically) take the same amount of time regardless of the input size. Constant time is expressed as <code>O(1)</code>. The following example is a constant time function because hash-based lookups in Swift do not require enumeration over the entire collection.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// hash-based lookups on a swift dictionary are O(1) </span>
</span><span class='line'><span class="n">func</span> <span class="n">age</span><span class="p">(</span><span class="nl">name:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Int</span><span class="o">?</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">let</span> <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;jane&quot;</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s">&quot;john&quot;</span><span class="o">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s">&quot;sam&quot;</span><span class="o">:</span> <span class="mi">19</span><span class="p">]</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">names</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Another very common notation is <em><em>linear time</em></em> which is represented as <code>O(n)</code>. A linear algorithm&rsquo;s execution time grows linearly with the size of it&rsquo;s input. This simple array lookup has a complexity of <code>O(n)</code> because it (potentially) requires enumerating the entire collection to produce a result.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// enumerating a simple swift array is O(n) </span>
</span><span class='line'><span class="c1">// there are more efficient ways to write this code</span>
</span><span class='line'><span class="n">func</span> <span class="n">ageFound</span><span class="p">(</span><span class="nl">age:</span> <span class="n">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">let</span> <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">19</span><span class="p">]</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">value</span> <span class="k">in</span> <span class="n">values</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">age</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">true</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">false</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><em><em>Quadratic time</em></em>, written as <code>O(n2)</code> describes an algorithm that grows quadratically. Increasing the input size by a single unit increases the workload by an order of magnitude. The easiest way to visualize <code>O(n2)</code> involves a loop nested in a loop. For each element in the outer loop the algorithm must loop through every element in the inner loop.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// printing out all the combinations of two arrays of strings is `O(n2)`</span>
</span><span class='line'><span class="c1">// suits and ranks taken from the excellent book `Advanced Swift` by </span>
</span><span class='line'><span class="c1">// Chris Eidhof and Airspeed Velocity</span>
</span><span class='line'><span class="n">func</span> <span class="nf">combineSuitsAndRanks</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">let</span> <span class="n">suits</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;♠︎&quot;</span><span class="p">,</span> <span class="s">&quot;♥︎&quot;</span><span class="p">,</span> <span class="s">&quot;♣︎&quot;</span><span class="p">,</span> <span class="s">&quot;♦︎&quot;</span><span class="p">]</span>
</span><span class='line'>    <span class="n">let</span> <span class="n">ranks</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;J&quot;</span><span class="p">,</span><span class="s">&quot;Q&quot;</span><span class="p">,</span><span class="s">&quot;K&quot;</span><span class="p">,</span><span class="s">&quot;A&quot;</span><span class="p">]</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">rank</span> <span class="k">in</span> <span class="n">ranks</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">suit</span> <span class="k">in</span> <span class="n">suits</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">print</span><span class="p">(</span><span class="n">rank</span> <span class="o">+</span> <span class="n">suit</span><span class="p">)</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>O(log n)</code> describes <em><em>logarithmic time</em></em>. An algorithm that can repeatedly subdivide the work in such a way that doubling the size of the data does not double the amount of work required to complete the algorithm. The commonly cited example of <code>O(log n)</code> is a binary search. Wayne Bishop&rsquo;s &ldquo;Swift Algorithms &amp; Data Structures.&rdquo; and Chris Eidhof and Airspeed Velocity&rsquo;s &ldquo;Advanced Swift&rdquo; both have great implementations of binary search in Swift.</p>

<p>Knowing the performance characteristics of the code we write allows us to objectively evaluate and improve it. Big O can be a helpful tool for us to make decisions about our own code as well as 3rd party code that we use in our apps.</p>

<p>There are many more examples of big O notation, <em><em>linearithmic time</em></em> <code>O(n log n)</code>, <em><em>cubic time</em></em> <code>O(n3)</code>, <em><em>exponential time</em></em> <code>2poly(n)</code>, <em><em>factorial time</em></em> <code>O(n!)</code>, <em><em>polylogarithmic time</em></em> <code>poly(log n)</code>, etc.</p>

<p>See anything that looks wrong? Please let me know. I&rsquo;m intending to write a handful of posts about subjects that require me to do some research in order to write (semi) intellegently about them so I won&rsquo;t be sore if you correct my mistakes 😜.</p>

<p>For more reading on big O notation checkout:</p>

<ul>
<li><a href="https://en.wikipedia.org/wiki/Big_O_notation">Wikipedia</a></li>
<li><a href="http://waynewbishop.com/swift/">Swift Algorithms &amp; Data Structures.</a> by Wayne Bishop</li>
<li><a href="https://justin.abrah.ms/computer-science/big-o-notation-explained.html">Big-O notation explained by a self-taught programmer</a></li>
<li><a href="https://www.interviewcake.com/article/java/big-o-notation-time-and-space-complexity">Big O Notation Time and Space Complexity</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/31/more-functional-please/">More Functional Please</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-31T10:43:00-07:00" pubdate data-updated="true">Dec 31<span>st</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Since starting the Ello iOS app I&rsquo;ve been writing Swift 99% of the time. Its not yet as natural as Objective-C to me but the benefits are obvious. A concise syntax with ALL types as first class citizens has removed a lot of the primitive/object song and dance required in Objective-C. I knew I&rsquo;d love Swift&rsquo;s syntax and type system. What I&rsquo;ve been surprised by, and excited by, are Swift&rsquo;s functional features. Most of the interesting exploration and writing about Swift has come from the Functional programming community. I have to admit that almost all of the functional programming concepts are new to me. Like most Objective-C developers I come from a world of strict object orientation and an imperative programming mindset.</p>

<p>This new (to me) functional approach has opened up a world of new techniques and tools I&rsquo;m convinced will make my code easier to maintain and less error prone. The takeaway for me so far is that functional programming&rsquo;s primary benefit is removing as much concern about state as possible while focusing on the <strong>WHAT</strong> instead of the <strong>HOW</strong>.</p>

<p>Managing state is one of the most common problems we encounter when building a reasonably sized application. It starts out simple at first. An instance variable here, another one over there. State instance variables are cheap and convenient. They help you solve an immediate problem and allow you to get back to the function or task at hand. The problem is that they introduce huge complexity as a system grows. Their intended usage and area of influence becomes unclear. A bit like the story of the boiling frog they add complexity little by little over time. Before you&rsquo;ve recognized it the application is in big trouble. The problem is that if they&rsquo;re not rigorously maintained they can add untold hours of development to the life of an application.</p>

<p>Functional programming favors immutability over mutable objects. At first this seemed wasteful to me. Why create something new each time when I already have an available object. Turns out that the stability of data structures not changing is usually worth the small trade off of allocating a new one.</p>

<p>I recently came across Rob Napier&rsquo;s slides from his talk <a href="https://speakerdeck.com/rnapier/llama-calculus">&ldquo;Introduction to functional programming in Swift&rdquo;</a> from CocoaConf Atlanta 2014. Its a great set of slides that I encourage you to read if you&rsquo;re interested in a more in depth look at functional concepts and motivations. The example below is a simple example of using Swift&rsquo;s <code>map</code> function in place of the traditional for loop.</p>

<p>This code is a simplified version of code we have in the Ello app. Posts represent a user&rsquo;s post. Regions are sections of content in a post. Our goal is to create an array of <code>String</code> types, each containing the content for an individual region. Simple enough.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">struct</span> <span class="n">Region</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">let</span> <span class="nl">content:</span><span class="n">String</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">init</span><span class="p">(</span><span class="nl">content:</span><span class="n">String</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">self</span><span class="p">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">content</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">struct</span> <span class="n">Post</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">let</span> <span class="nl">regions:</span><span class="p">[</span><span class="n">Region</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">init</span><span class="p">(</span><span class="nl">regions:</span><span class="p">[</span><span class="n">Region</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">self</span><span class="p">.</span><span class="n">regions</span> <span class="o">=</span> <span class="n">regions</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>An array of <code>strings</code> using the imperative for loop. We pass in an array of posts, loop over them, inner loop over their regions and append each region&rsquo;s content property to a temporary array and return it.</p>

<p>This is slightly contrived and unlikely to appear in the wild (hopefully) but it illustrates the most imperative way we can solve the problem. Most of the syntax is focused on the <strong>how</strong>. We have three temporary variables <code>regions</code>, <code>i</code> and <code>j</code>, subscripting, lots of the machinery is exposed.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">func</span> <span class="n">regions</span><span class="p">(</span><span class="nl">posts:</span><span class="p">[</span><span class="n">Post</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">var</span> <span class="n">regions</span> <span class="o">=</span> <span class="p">[</span><span class="n">String</span><span class="p">]()</span>
</span><span class='line'>  <span class="k">for</span> <span class="n">var</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">posts</span><span class="p">.</span><span class="n">count</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">let</span> <span class="n">post</span> <span class="o">=</span> <span class="n">posts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span class='line'>      <span class="k">for</span> <span class="n">var</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">post</span><span class="p">.</span><span class="n">regions</span><span class="p">.</span><span class="n">count</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">let</span> <span class="n">region</span> <span class="o">=</span> <span class="n">post</span><span class="p">.</span><span class="n">regions</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
</span><span class='line'>          <span class="n">regions</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">region</span><span class="p">.</span><span class="n">content</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">regions</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Lets solve the problem using Swift&rsquo;s <code>Array.map</code> function. <code>map</code> enumerates the array handing your function one element from the array. You do whatever you want with the element and hand back the type you specify as the return value. Here we map over posts and for each post in posts we map over it&rsquo;s regions. For each region we return it&rsquo;s <code>content</code> property. Notice the use of the <code>join</code> function. <code>join</code> is a handy function most commonly used to convert an array of strings into a single string. In this case we use it to turn an array of arrays into a flattened array.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">func</span> <span class="n">regions</span><span class="p">(</span><span class="nl">posts:</span><span class="p">[</span><span class="n">Post</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">join</span><span class="p">([],</span>
</span><span class='line'>      <span class="n">posts</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">post</span> <span class="k">in</span>
</span><span class='line'>          <span class="n">post</span><span class="p">.</span><span class="n">regions</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">$0</span><span class="p">.</span><span class="n">content</span> <span class="p">}</span>
</span><span class='line'>      <span class="p">})</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The functional approach uses no temporary variables and focuses on the <strong>what</strong> rather than the <strong>how</strong>. In this case it&rsquo;s more succinct as well.</p>

<p>These concepts are definitely Functional Programming 101 (or maybe even a pre-requisite) but they&rsquo;re easily understandable and were my gateway drug into more sophisticated functional techniques. I&rsquo;m still a strong believer in object orientation and intend to remain one but functions like <code>map</code> are fantastic new tools we can use to make our Swift code more readable, safer and less error prone.</p>

<p>I consider myself a n00b when it comes to functional thinking. Our backend counterparts in the ruby world have used these techniques for years. My goal is to find situations where I can challenge my existing mode of imperative problem solving with a functional approach. I&rsquo;m convinced my code will be more stable, more readable and more portable. Plus, this stuff is just plain fun.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/30/space-exploration/">Space Exploration</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-30T14:26:00-07:00" pubdate data-updated="true">Dec 30<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The recent launch of Orion got me thinking about space exploration. The nostalgic notion of the whole country excited about putting a man on the moon. I decided to learn more about it and started reading <a href="http://www.amazon.com/Apollo-Charles-Murray/dp/0976000806">Apollo</a>. Coincidentally Carrie gave me an early stocking stuffer, <a href="https://www.amazon.com/Martian-Novel-Andy-Weir-ebook/dp/B00EMXBDMA">The Martian</a> a fictional story about an astronaut stranded on Mars during an Ares space program mission. I plowed through the book and am now back to reading the much longer, and denser non-fictional history of the Apollo program. The space program is fascinating. Full of big personalities and huge ambition. The scale of the technical challenges they overcame is inspirational to me. The coordination of such an immense project is hard to grasp.</p>

<p>While my work on iPhone apps is but a fraction of the scale I think there are a lot of lessons that apply.</p>

<ul>
<li>Failure and the process of investigating failure is as much a part of the engineering process as succeeding. Fixing a bug or spending the time to figure out a challenge is very valuable, not a waste of time or effort.</li>
<li>Discipline is a lost art. My number one goal for the new year is a renewed effort in self discipline and focus. Some aspects of programming are tedious but they are essential to a quality product.</li>
<li>Along those lines: Technical Journaling could be especially useful for my poor memory. This entry is the first in my attempt to capture and organize my thoughts. I plan to document my problem solving and daily progress. I ordered a Moleskin Evernote edition with the hopes of retaining much more of my daily thinking through the act of physically writing it down. Being able to scan it in addresses my concerns about it not being searchable and backed up.</li>
</ul>


<p>I plan to post as much of my journal here as possible. If you&rsquo;d rather follow along without all the other Ello posts of mine I&rsquo;ll have it on my blog, <a href="http://seancdougherty.com">seancdougherty.com</a> as well.</p>

<p><strong>Sean and Ello to the moon in 2015!</strong> 🚀</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/17/swift/">Swift</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-17T08:12:00-06:00" pubdate data-updated="true">Jun 17<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This year was a big year for developers on Apple&rsquo;s platforms. Apple announced a ton of great stuff at <a href="/blog/2014/06/05/wwdc-2014">WWDC</a>. The most exciting news was their announcement of a new programming language, <a href="https://developer.apple.com/swift/">Swift</a>.</p>

<p>According to Apple&rsquo;s free to download book <a href="https://itun.es/us/jEUH0.l"><strong><em>The Swift Programming Language</em></strong></a></p>

<blockquote><p>&ldquo;Swift is a new programming language for iOS and OS X apps that builds on the best of C and Objective-C, without the constraints of C compatibility. Swift adopts safe programming patterns and adds modern features to make programming easier, more flexible, and more fun.&rdquo;</p></blockquote>

<p>Swift is intended to be a near complete replacement for Objective-C, the language iOS and OS X apps are currently written in. While most of us love programming in Objective-C we realize that it has some rough edges. Objective-C has been around for decades and does not have a lot of the features and syntax more modern languages have introduced. Swift brings a host of modern features such as <a href="http://en.wikipedia.org/wiki/Generic_programming">generics</a>, <a href="http://en.wikipedia.org/wiki/Tuples">tuples</a>, <a href="http://en.wikipedia.org/wiki/Closure_(computer_programming)">closures</a>, <a href="http://en.wikipedia.org/wiki/Pattern_matching">pattern matching</a> and <a href="http://en.wikipedia.org/wiki/Type_inference">type inference</a> while remaining safe and most importantly, fast. Swift is compact and expressive which will lead to apps requiring less code and being easier to maintain.</p>

<p>I predict that Swift&rsquo;s approachable and familiar syntax will lead to an influx of new Cocoa and Cocoa Touch developers. These new developers will bring new ideas to the platform. I can&rsquo;t wait to see what will happen over the next few years. We are going to move in directions we haven&rsquo;t yet conceived of. Its an exciting time to develop for iOS and OS X. As Mattt Thompson put it <a href="https://twitter.com/mattt/status/473557792331010048">&ldquo;How neat that we’re all beginners at the same time though, right?&rdquo;</a></p>

<h2>Getting Started</h2>

<p>Swift requires Xcode 6 beta which at the time of this writing is pre-release software. In order to download it you&rsquo;ll need to be a member of the iOS Developer Program or Mac Developer Program.</p>

<p>Once you have Xcode 6 beta or later up and running you can start writing and compiling Swift.</p>

<p>In an actual application deployed to iOS devices or a Mac Swift files have a <code>.swift</code> extension. They can be compiled along side Objective-C, C and Objective-C++ code. Objective-C code can use Swift classes (with some restrictions) and vice-a-versa.</p>

<p>When conceiving Swift the authors at Apple had a goal of making learning Swift and trying out the language as easy, interactive and fun as possible. They named what they came up with Playgrounds.</p>

<h3>Playgrounds</h3>

<p>Playgrounds are files with a <code>.playground</code> extension. When opened in XCode 6 they launch an interactive environment for you to experiment with Swift code. Playgrounds are the quickest and easiest way to start writing Swift. They are a bit like Ruby&rsquo;s irb but much more powerful. Results are displayed immediately in a column on the right and through a powerful feature available in other areas of Xcode you are able to visualize several sophisticated types. It is even possible to see the results of values changing in your Swift code over time. There really is no way to do playgrounds justice here. You have to interact with one to understand how awesome they are.</p>

<p>In fact, Apple has created a playground called &ldquo;GuidedTour.playground&rdquo; which is a comprehensive and interactive playground that goes through most of Swift&rsquo;s language features with descriptions and live examples that you can play with and modify on the fly. The iOS Developer Library has a <a href="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/Swift_Programming_Language/GuidedTour.html">Swift Tour</a> (you&rsquo;ll need a valid Apple developer account to access it). Click on <a href="/assets/Swift.playground.zip">Swift.playground.zip</a> to download a zip archive containing a playground file with all the code in this post.</p>

<h3>Basics</h3>

<h4>Everyone is a first class citizen in Swift</h4>

<p>Strings, integers, doubles, classes, structs, enums and even functions are all valid types. Gone are the distinctions between primitives and objects. All types can be stored in collections and extended. The first classifying of all types provides a concise and uniform approach to developing in Swift.</p>

<h4>Variables</h4>

<p>Swift is able to infer type information in most cases so specifying it is not required if a value is assigned by the expression.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// Swift knows this is a string because the right hand value is a string</span>
</span><span class='line'><span class="n">var</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Walter&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// variable and constant types are specified after the name and a colon</span>
</span><span class='line'><span class="n">var</span> <span class="n">lastName</span> <span class="o">:</span> <span class="n">String</span> <span class="o">=</span> <span class="s">&quot;White&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">var</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">// inferred to Int</span>
</span><span class='line'>
</span><span class='line'><span class="n">var</span> <span class="n">explictAge</span> <span class="o">:</span> <span class="n">Int</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">// explicitly set to Int</span>
</span><span class='line'>
</span><span class='line'><span class="n">var</span> <span class="n">count</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="c1">// inferred to Double</span>
</span><span class='line'>
</span><span class='line'><span class="n">var</span> <span class="n">explicitCount</span> <span class="o">:</span> <span class="n">Double</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">// force to an int</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Constants</h4>

<p>The Swift documentation favors immutability so constants are highly visible in the language. Constants are indicated using the <code>let</code> keyword in place of <code>var</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">let</span> <span class="n">immutableName</span> <span class="o">=</span> <span class="s">&quot;Walter&quot;</span> <span class="c1">// an immutable string constant</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// immutableName = &quot;Walter White&quot; // won&#39;t compile</span>
</span><span class='line'>
</span><span class='line'><span class="n">var</span> <span class="n">mutableName</span> <span class="o">=</span> <span class="s">&quot;walter&quot;</span> <span class="c1">// a mutable string variable</span>
</span><span class='line'>
</span><span class='line'><span class="n">mutableName</span> <span class="o">=</span> <span class="s">&quot;Walter White&quot;</span> <span class="c1">// works</span>
</span></code></pre></td></tr></table></div></figure>


<h4>String</h4>

<p>Strings are concatenated with the <code>+</code> operator. They can be added to with the <code>+=</code> operator. Strings can also interpolate other calculated values using a backslash followed by the expression in parenthesis <code>\(expression)</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">var</span> <span class="n">nameDescription</span> <span class="o">=</span> <span class="s">&quot;Walter&quot;</span>
</span><span class='line'><span class="n">nameDescription</span> <span class="o">+=</span> <span class="s">&quot; White&quot;</span> <span class="c1">// name = &quot;Walter White&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">let</span> <span class="n">yearsOld</span> <span class="o">=</span> <span class="mi">50</span>
</span><span class='line'><span class="n">nameDescription</span> <span class="o">+=</span> <span class="s">&quot; is \(yearsOld) years old&quot;</span> <span class="c1">// name = &quot;Walter White is 50 years old&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Collections</h4>

<p>Swift has several collection types. The most common are <code>Array</code> and <code>Dictionary</code>. Just like strings and the number types they are mutable if they are variables and immutable when they are constants.</p>

<h4>Array</h4>

<p>Arrays are typed in Swift.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">var</span> <span class="n">integers</span> <span class="o">:</span> <span class="n">Int</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</span><span class='line'><span class="n">integers</span> <span class="o">+=</span> <span class="s">&quot;non integer&quot;</span> <span class="c1">// will not compile</span>
</span></code></pre></td></tr></table></div></figure>


<p>If the type can be inferred the type information is not required at declaration time.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">var</span> <span class="n">characters</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Jesse&quot;</span><span class="p">,</span> <span class="s">&quot;Walter&quot;</span><span class="p">,</span> <span class="s">&quot;Hank&quot;</span><span class="p">]</span> <span class="c1">// inferred as an array of strings</span>
</span><span class='line'>
</span><span class='line'><span class="n">characters</span> <span class="o">+=</span> <span class="s">&quot;Skyler&quot;</span> <span class="c1">// add a string to the array</span>
</span><span class='line'>
</span><span class='line'><span class="n">characters</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="c1">// &quot;Hank&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Dictionary</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">var</span> <span class="n">states</span> <span class="o">:</span> <span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span>
</span><span class='line'>    <span class="s">&quot;Colorado&quot;</span> <span class="o">:</span> <span class="mi">5000000</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&quot;Hawaii&quot;</span> <span class="o">:</span> <span class="mi">1000000</span>
</span><span class='line'><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">var</span> <span class="n">shows</span> <span class="o">=</span> <span class="p">[</span>
</span><span class='line'>    <span class="s">&quot;Walter&quot;</span> <span class="o">:</span> <span class="s">&quot;Science Teacher&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&quot;Jesse&quot;</span> <span class="o">:</span> <span class="s">&quot;Unemployed&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&quot;Hank&quot;</span> <span class="o">:</span> <span class="s">&quot;DEA Agent&quot;</span>
</span><span class='line'><span class="p">]</span> <span class="c1">// type inferred to a key type String and value type String</span>
</span><span class='line'>
</span><span class='line'><span class="n">shows</span><span class="p">[</span><span class="s">&quot;Jesse&quot;</span><span class="p">]</span> <span class="c1">// &quot;Unemployed&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">shows</span><span class="p">[</span><span class="s">&quot;Skyler&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;Accountant&quot;</span> <span class="c1">// add an element to the dictionary</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Control Flow</h4>

<p>Swift has most of the familiar mechanisms for controlling flow that Objective-C developers are familiar with. They&rsquo;re just a lot cooler and more useful in Swift.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">var</span> <span class="n">registered</span> <span class="o">=</span> <span class="n">true</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">registered</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// if statements do not require parenthesis</span>
</span><span class='line'>    <span class="c1">// but they do require curly braces</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Swift has range types that are enumerable</span>
</span><span class='line'><span class="k">for</span> <span class="n">number</span> <span class="k">in</span> <span class="mf">5.</span><span class="p">.</span><span class="mf">.10</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;\(number) plus \(number) is \(number + number)&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">let</span> <span class="n">breakingBadCharacters</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Jesse&quot;</span><span class="p">,</span> <span class="s">&quot;Walter&quot;</span><span class="p">,</span> <span class="s">&quot;Hank&quot;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="k">for</span> <span class="n">character</span> <span class="k">in</span> <span class="n">breakingBadCharacters</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;\(character)&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// a string&#39;s characters are enumerable</span>
</span><span class='line'><span class="k">for</span> <span class="n">letter</span> <span class="k">in</span> <span class="s">&quot;Breaking Bad&quot;</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="n">letter</span><span class="p">)</span>
</span><span class='line'>    <span class="n">letter</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">var</span> <span class="n">funds</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'><span class="k">while</span> <span class="n">funds</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// cook meth until broke is false</span>
</span><span class='line'>    <span class="n">funds</span><span class="o">++</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">do</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// cook meth at least once</span>
</span><span class='line'>    <span class="n">funds</span><span class="o">++</span>
</span><span class='line'><span class="p">}</span> <span class="k">while</span> <span class="n">funds</span> <span class="o">&lt;</span> <span class="mi">100</span>
</span></code></pre></td></tr></table></div></figure>


<p>Dictionaries are enumerable as a key value tuple pair. More on tuples below.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">let</span> <span class="n">cast</span> <span class="o">=</span> <span class="p">[</span>
</span><span class='line'>    <span class="s">&quot;Walter&quot;</span> <span class="o">:</span> <span class="s">&quot;Science Teacher&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&quot;Jesse&quot;</span> <span class="o">:</span> <span class="s">&quot;Unemployed&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&quot;Hank&quot;</span> <span class="o">:</span> <span class="s">&quot;DEA Agent&quot;</span>
</span><span class='line'><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="k">for</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">profession</span><span class="p">)</span> <span class="k">in</span> <span class="n">cast</span> <span class="p">{</span>
</span><span class='line'>    <span class="s">&quot;\(name) is a \(profession)&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Switch</h4>

<p>The coolest and most powerful control flow mechanism in Swift is the switch statement. Swift&rsquo;s switch statement works with any type compared to Objective-C&rsquo;s integer only switching. Swift switch allows for pattern matching, a powerful feature new to iOS and OS X development.</p>

<p>Switch statements must be exhaustive so a default is required if the case statements don&rsquo;t handle all possible cases. Execution does not fall through case statements so no <code>break</code> keyword is necessary.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">let</span> <span class="n">fullName</span> <span class="o">=</span> <span class="s">&quot;Walter White&quot;</span>
</span><span class='line'><span class="n">var</span> <span class="n">output</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">switch</span> <span class="n">fullName</span> <span class="p">{</span>
</span><span class='line'><span class="k">case</span> <span class="n">let</span> <span class="n">x</span> <span class="n">where</span> <span class="n">countElements</span><span class="p">(</span><span class="n">fullName</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="o">:</span>
</span><span class='line'>    <span class="n">output</span> <span class="o">=</span> <span class="s">&quot;more than 3 characters long&quot;</span>
</span><span class='line'><span class="k">case</span> <span class="s">&quot;Jesse&quot;</span><span class="p">,</span> <span class="s">&quot;Hank&quot;</span><span class="o">:</span>
</span><span class='line'>    <span class="n">output</span> <span class="o">=</span> <span class="n">fullName</span>
</span><span class='line'><span class="k">case</span> <span class="n">let</span> <span class="n">x</span> <span class="n">where</span> <span class="n">x</span><span class="p">.</span><span class="n">hasSuffix</span><span class="p">(</span><span class="s">&quot;White&quot;</span><span class="p">)</span><span class="o">:</span>
</span><span class='line'>    <span class="n">output</span> <span class="o">=</span> <span class="s">&quot;ends in White&quot;</span>
</span><span class='line'><span class="k">default</span><span class="o">:</span>
</span><span class='line'>    <span class="n">output</span> <span class="o">=</span> <span class="s">&quot;no matches found&quot;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">output</span> <span class="c1">// &quot;more than 3 characters long&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Functions</h4>

<p>Functions are types just like everything else in Swift. You can define them, call them, as well as pass them as arguments to another function and return them from other functions. Functions are defined using the <code>func</code> keyword. They accept 0 or more arguments and may return a value. A function returns a value with a <code>-&gt;</code> and type after the parentheses.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">func</span> <span class="n">add</span><span class="p">(</span><span class="nl">a:</span><span class="n">Int</span><span class="p">,</span> <span class="nl">b:</span><span class="n">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">let</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">sum</span> <span class="c1">// 12</span>
</span></code></pre></td></tr></table></div></figure>


<p>In order to remain compatible with Cocoa and Cocoa Touch function arguments can have an external name as well as an internal variable name. Lets look at a <code>UITableViewDataSource</code> protocol method in both Objective-C and Swift.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// Objective-C</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">UITableViewCell</span> <span class="o">*</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span>
</span><span class='line'>         <span class="nf">cellForRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Swift</span>
</span><span class='line'><span class="c1">// notice that the first argument does not have an external name</span>
</span><span class='line'><span class="c1">// while the second argument is named cellForRowAtIndexPath externally</span>
</span><span class='line'><span class="c1">// and indexPath internally</span>
</span><span class='line'><span class="n">func</span> <span class="n">tableView</span><span class="p">(</span><span class="nl">tableView:</span> <span class="n">UITableView</span><span class="o">!</span><span class="p">,</span>
</span><span class='line'>    <span class="n">cellForRowAtIndexPath</span> <span class="nl">indexPath:</span> <span class="n">NSIndexPath</span><span class="o">!</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UITableViewCell</span><span class="o">!</span>
</span></code></pre></td></tr></table></div></figure>


<h3>The Cool New Hotness</h3>

<p>The language features below are either completely new compared to Objective-C or they work in ways novel enough to note here.</p>

<h4>Optionals</h4>

<p>As I mentioned above, Swift is designed to be safe. Optionals help keep code safe by forcing the developer to be explicit about variables and constants. By default all variables and constants must have an assigned value. This ensures that it is safe to use variables and constants without first checking to see if they have a value. However, sometimes we&rsquo;ll need optional value variables or constants. This is where Swift Optionals come in. Optionals are a formal language feature that marks a variable or constant as potentially having no value. To mark a variable or constant as optional use a <code>?</code> after the type.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">var</span> <span class="nl">content:</span><span class="n">String</span><span class="o">?</span>
</span><span class='line'>
</span><span class='line'><span class="n">func</span> <span class="n">isDone</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Bool</span><span class="o">?</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">nil</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">func</span> <span class="n">storeUserInfo</span><span class="p">(</span><span class="nl">name:</span><span class="n">String</span><span class="o">?</span><span class="p">,</span> <span class="nl">age:</span><span class="n">Int</span><span class="o">?</span><span class="p">)</span> <span class="p">{}</span>
</span></code></pre></td></tr></table></div></figure>


<p>When using an optional variable or function with an optional return value we must explicitly unwrap the value held by the optional using a <code>!</code> after the referenced optional.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">content</span> <span class="o">=</span> <span class="s">&quot;Some content here&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">content</span> <span class="c1">// compile error</span>
</span><span class='line'>
</span><span class='line'><span class="n">println</span><span class="p">(</span><span class="n">content</span><span class="o">!</span><span class="p">)</span> <span class="c1">// compiles but may introduce a run time crash if content is nil</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">content</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="n">content</span><span class="o">!</span><span class="p">)</span> <span class="c1">// safe because optionals are true if they have a value</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// automatic unwrapping with if let shorthand</span>
</span><span class='line'><span class="k">if</span> <span class="n">let</span> <span class="n">safeContent</span> <span class="o">=</span> <span class="n">content</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">safeContent</span> <span class="c1">// preferred handling of optionals</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Tuples</h4>

<p>Tuples are a group of compound values. To create a tuple enclose multiple values in parentheses. They can contain any number of values as well as any combination of types. The values can have names or not. Tuples are the mechanism for returning more than one value from a function. Access values in a tuple by position or name.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">var</span> <span class="n">ages</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">ages</span><span class="mf">.1</span> <span class="c1">// 15</span>
</span><span class='line'>
</span><span class='line'><span class="n">func</span> <span class="n">getNames</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nl">tom:</span><span class="n">String</span><span class="p">,</span> <span class="nl">dick:</span><span class="n">String</span><span class="p">,</span> <span class="nl">harry:</span><span class="n">String</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">(</span><span class="s">&quot;Tom&quot;</span><span class="p">,</span> <span class="s">&quot;Dick&quot;</span><span class="p">,</span> <span class="s">&quot;Harry&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">let</span> <span class="p">(</span><span class="n">tom</span><span class="p">,</span> <span class="n">dick</span><span class="p">,</span> <span class="n">harry</span><span class="p">)</span> <span class="o">=</span> <span class="n">getNames</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="n">harry</span> <span class="c1">// &quot;Harry&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">getNames</span><span class="p">().</span><span class="n">dick</span> <span class="c1">// &quot;Dick&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Enums</h4>

<p>Enums are useful for storing a known list of enumerable values. Swift enums support functions as well.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">enum</span> <span class="n">Framework</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">case</span> <span class="n">CocoaTouch</span><span class="p">,</span> <span class="n">Rails</span><span class="p">,</span> <span class="n">Android</span>
</span><span class='line'>    <span class="n">func</span> <span class="n">language</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">switch</span> <span class="n">self</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">case</span> <span class="p">.</span><span class="nl">CocoaTouch:</span>
</span><span class='line'>            <span class="k">return</span> <span class="s">&quot;Swift&quot;</span>
</span><span class='line'>        <span class="k">case</span> <span class="p">.</span><span class="nl">Rails:</span>
</span><span class='line'>            <span class="k">return</span> <span class="s">&quot;Ruby&quot;</span>
</span><span class='line'>        <span class="k">case</span> <span class="p">.</span><span class="nl">Android:</span>
</span><span class='line'>            <span class="k">return</span> <span class="s">&quot;Java&quot;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">let</span> <span class="n">rails</span> <span class="o">=</span> <span class="n">Framework</span><span class="p">.</span><span class="n">Rails</span>
</span><span class='line'><span class="n">let</span> <span class="n">railsLanguage</span> <span class="o">=</span> <span class="n">rails</span><span class="p">.</span><span class="n">language</span><span class="p">()</span> <span class="c1">// &quot;Ruby&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Structs</h4>

<p>Structs are similar to classes in Swift with the distinction that they are immutable by default. They are copied when passed in code. Classes are passed by reference.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">struct</span> <span class="n">Programmer</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">name</span> <span class="o">:</span> <span class="n">String</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">framework</span> <span class="o">:</span> <span class="n">Framework</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">func</span> <span class="n">frameworkLanguage</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">framework</span><span class="p">.</span><span class="n">language</span><span class="p">()</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">let</span> <span class="n">cocoaProgrammer</span> <span class="o">=</span> <span class="n">Programmer</span><span class="p">(</span><span class="nl">name:</span><span class="s">&quot;Sean&quot;</span><span class="p">,</span> <span class="nl">framework:</span><span class="p">.</span><span class="n">CocoaTouch</span><span class="p">)</span>
</span><span class='line'><span class="n">let</span> <span class="n">frameworkLanguage</span> <span class="o">=</span> <span class="n">cocoaProgrammer</span><span class="p">.</span><span class="n">frameworkLanguage</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Generics</h4>

<p>Generics are a powerful tool for code reuse. They abstract code and provide flexibility while maintaing compile time type safety. Under the hood Swift uses generics for a host of the standard library features including collections like Array and Dictionary.</p>

<p><a href="https://itun.es/us/jEUH0.l"><strong><em>The Swift Programming Language</em></strong></a> has a great example of generics. The example is a simple <code>Stack</code>. In order to make the stack work with with any type generics are used. The stack is type safe but flexible enough to hold any type.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">struct</span> <span class="n">Stack</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">items</span> <span class="o">=</span> <span class="n">T</span><span class="p">[]()</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">mutating</span> <span class="n">func</span> <span class="n">push</span><span class="p">(</span><span class="nl">item:</span> <span class="n">T</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">items</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">mutating</span> <span class="n">func</span> <span class="n">pop</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">T</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">items</span><span class="p">.</span><span class="n">removeLast</span><span class="p">()</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">var</span> <span class="n">stackOfStrings</span> <span class="o">=</span> <span class="n">Stack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">()</span>
</span><span class='line'><span class="n">stackOfStrings</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="s">&quot;uno&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">stackOfStrings</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="s">&quot;dos&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">stackOfStrings</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="s">&quot;tres&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">stackOfStrings</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="s">&quot;cuatro&quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1">// the stack now contains 4 strings</span>
</span><span class='line'>
</span><span class='line'><span class="n">stackOfStrings</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span> <span class="c1">// won&#39;t compile because 123 is not a String</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h4>Extensions</h4>

<p>Extensions allow you to add functionality to existing types. They are similar to Objective-C&rsquo;s categories and Ruby&rsquo;s Modules. Unlike an Objective-C category a Swift Extension can extend classes, structures and enums. Extensions can also add computed properties and add protocal conformance to an existing type. Extensions are available app wide at compile time.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">extension</span> <span class="n">Double</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">func</span> <span class="n">multiply</span><span class="p">(</span><span class="nl">b:</span><span class="n">Double</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Double</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">self</span> <span class="o">*</span> <span class="n">b</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="mf">5.5</span><span class="p">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// 16.5</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h4>Protocols</h4>

<p>Swift Protocols are similar to protocols in Objective-C but like their Extension counterparts they available on all types. Protocols are similiar to Java&rsquo;s Interfaces. When a type adopts a protocol it is conforming to a contract defined by the protocol. Protocols define optional or required functions and/or properties. The best new feature of protocols in Swift are protocol instance properties. Protocols do not define the implementation of their functions or properties, concrete types conforming to the protocol implement all required functions and properties.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">protocol</span> <span class="n">HighFiveable</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">var</span> <span class="nl">numberOfHighFives:</span> <span class="n">Int</span> <span class="p">{</span> <span class="n">get</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">func</span> <span class="n">highFive</span><span class="p">()</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">class</span> <span class="nl">Person:</span> <span class="n">HighFiveable</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">numberOfHighFives</span> <span class="o">=</span> <span class="mi">20</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">func</span> <span class="n">highFive</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">println</span><span class="p">(</span><span class="s">&quot;I was high fived!&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">let</span> <span class="n">jim</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="n">jim</span><span class="p">.</span><span class="n">highFive</span><span class="p">()</span> <span class="c1">// &quot;I was high fived!&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h3>Summary</h3>

<p>I&rsquo;ve included all of the code snippets above in a playground file you can download and open up in Xcode 6 beta or greater.</p>

<p><a href="/assets/Swift.playground.zip">Swift.playground.zip</a></p>

<p>This is just a brief look at some of the key language featuers of Apple&rsquo;s new programming language, Swift. Reach me on Twitter <a href="https://twitter.com/sdougherty">@sdougherty</a> if you find any errors or have anything to add.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/05/wwdc-2014/">WWDC 2014</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-05T16:58:00-06:00" pubdate data-updated="true">Jun 5<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Apple&rsquo;s annual World Wide Developers Conference was held in San Francisco over the past week. It turns out that 2014 was a great year for first time attendees like myself and my fellow iOS developer co-worker David Nix <a href="https://twitter.com/dave_nix">@dave_nix</a>. GoSpotCheck was lucky enough to get two tickets in the Apple lottery (at a pretty price of $1600 each) and graciously sent David and I to soak up all the new Apple goodness. Between the two of us we were able to attend a wide range of sessions and events. This post is a team effort. We have taken the time to compare notes and put together what we feel are the key takeaways from WWDC 2014.</p>

<h2>Developers! Developers! Developers!</h2>

<p>If WWDC 2013 was all about users, 2014 was all about developers. While iOS 8 and OS X 10.10 have lots of great new features for end users these pale in comparison to the sheer volume of new and improved tools Apple made available to their millions of iOS and Mac developers. The general opinion we heard around Moscone was excitement and approval. We couldn&rsquo;t agree more.</p>

<p>The biggest news for us (by far) was the introduction of a new programming language, Swift. Swift is a modern, concise, expressive and safe programming language that is the future of iOS and OS X applications. There was a collective gasp from 5000+ developers when Swift was announced at the keynote. The rest of the week was all excitement as one developer after another decided what a great addition Swift is to the Cocoa and Cocoa Touch communities.</p>

<h2>Big takeaways</h2>

<ul>
<li>This was the biggest WWDC for developers since 2008 (the introduction of the App Store for the iPhone 3G).</li>
<li>Swift is available in iOS 7 or greater so supporting iOS 6 is a no go. <strong>Hint: We really want to use Swift.</strong></li>
</ul>


<h4>A little taste of the goodness</h4>

<p>Lets loop through the range of 1&hellip;5 inclusive and print out some calculations on index</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">for</span> <span class="n">index</span> <span class="k">in</span> <span class="mf">1.</span><span class="p">.</span><span class="mf">.5</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;\(index) times 5 is \(index * 5)&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Replace indexes 2, 3 and 4 in our friends array</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">friends</span><span class="p">[</span><span class="mf">2.</span><span class="p">.</span><span class="mf">.4</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;John&quot;</span><span class="p">,</span> <span class="s">&quot;Anna&quot;</span><span class="p">,</span> <span class="s">&quot;Henry&quot;</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Use a tuple to return multiple ages of our friends</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">func</span> <span class="nf">getAges</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">Int</span><span class="p">,</span> <span class="n">Int</span><span class="p">,</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">(</span><span class="mi">28</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">let</span> <span class="p">(</span><span class="n">johnAge</span><span class="p">,</span> <span class="n">annaAge</span><span class="p">,</span> <span class="n">henryAge</span><span class="p">)</span> <span class="o">=</span> <span class="n">getAges</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is just a small taste of the compactness and expressiveness built into Swift. For a more detailed look into the language download &ldquo;The Swift Programming Language&rdquo; in iBooks.</p>

<ul>
<li>The new debugging features in Xcode are amazing.</li>
<li>Swift plays well with ObjC (and vice versa). An incredible feat by Apple.</li>
<li>Apple hates the &ldquo;hamburger&rdquo; menu, and we agree with them.</li>
<li>Remember, everything really cool in iOS 8 will (probably) not be usable with iOS 7.</li>
<li>Testflight will be integrated. No more device ids needed! Just apple ids. (It’s based on per user, not on per device.)</li>
<li>No more calculating tableview cell heights or collectionview cell sizes! (iOS 8 only though)</li>
<li>A lot of the new iOS 8 user-facing features are already present in Android. Whether or not Apple does this better than Android remains to be seen.</li>
<li>Xcode playgrounds are incredible. Totally changes the way we code in Swift (for the better). It&rsquo;s like irb or pry on steroids.</li>
<li>Apple is pushing for more interactive UI (think Facebook&rsquo;s Paper).</li>
<li>A big theme at the conference was adaptability. It is clear Apple is planning for more devices and potential screen dimensions. A lot of the new UIKit APIs are geared towards making application user interfaces work at any size. Becuase of this many of the explict references to iPad, iPhone and specific device orientations (portrait or landscape) are disappearing from the language. In their place are adaptive concepts that aim to communicate relative size such as &lsquo;regular height&rsquo; or &lsquo;compact width&rsquo;. They&rsquo;ve put a tremndous amount of effort into making adaptive layouts easier to create.</li>
<li>Continuity is anothe concept Apple reiterated. Allowing users to move from device to device picking up where they left off is going to set high quality apps apart.</li>
<li>Prototyping, or making <em>fake</em> apps is a crucial step in the process. Start with the most disposable possible version of an app idea. Use a pen and paper. Come up with lots of ideas. <strong>Throw most of them away.</strong> Build static, image based versions of the ones that seem promising. Show them to real users. <strong>Throw most of them away.</strong> Don&rsquo;t start building a time intensive <strong>real</strong> app until you have feedback on the fake app from real users. Hopefully this results in a better app, that real users want, with much less effort.</li>
</ul>


<h2>Opinion</h2>

<p>We&rsquo;re curious to see how fast Swift is compared to Objective C. Part of the joy of ObjC is that, even though it is verbose and &ldquo;ugly&rdquo;, you typically never have to worry about performance. It is very fast. It was stupid of Apple to compare Swift to Python in the main keynote. Python is an interpreted language, Swift is compiled. It&rsquo;s like comparing apples to oranges (pun intended). But Apple did have slides saying Swift is faster than ObjC. However, I (David) read an article, which I can&rsquo;t find now of course, that benchmarked Swift vs ObjC. The article claimed Swift was slower, sometimes by 200x or more. The author was doing things that probably wouldn&rsquo;t come up in most production apps (i.e. sorting millions of objects). However, only time will tell to see if Swift keeps on par with ObjC.</p>

<p>Swift combined with Xcode&rsquo;s new debugging features is going to boost programmer productivity significantly. It will give us more time to work on polished (nice to have) features like custom animations or custom UI.</p>

<p>ObjC won&rsquo;t be going anywhere for a while, but we might as well consider it legacy code. Swift is so much nicer to write. We can see Apple dropping ObjC in the next couple years. They often take an adapt or die methodology.</p>

<p>Several sessions dealt with user interfaces and how to approach designing them, both visual design and information design. Apple continuously reinforced the importance of <strong>clear</strong>, <strong>simple</strong> and <strong>focused</strong> design. An example of poor design, in Apple&rsquo;s opinion, is the hamburger button. Hamburger buttons interfere with the navigation back arrow, confusing the user. They also open drawers which tend to collect junk just like real drawers. Apple highly recommends tab bars instead of hamburger buttons. Even though tab bars take up screen real estate they greatly increase clarity and tend to get used much more often than hidden hamburger button navigation. We agree that hamburger buttons should go away in most cases.</p>

<p>Mature apps will need to be adaptive. This means having the appropriate content and sizing of that content at all size classes. This also means making our apps handle Adaptive Type, a system wide, user configured setting that dynamically changes the size of type throughout all apps.</p>

<h2>Technical Thoughts (targeted for programmers)</h2>

<p>Swift has no concept of public/private/protected. It will be the developer&rsquo;s job to clearly mark methods as public (via a comment) and to only use those methods publicly. However, Apple said access control will be coming to Swift in the future.</p>

<p>The ObjC feature of sending a message to nil and nothing happens has been great for the user in preventing crashes, but tough for the programmer when debugging during development. Swift does not have this feature. At first, we were scared this would lead to &ldquo;NullPointerExceptions&rdquo; that are common in Java. However, Swift uses Optional types to address this issue. An optional tells the compiler that a variable may or may not have a value. The compiler, then, is very strict about how you use these values. It also forces you to initialize every variable. You cannot initialize a non-optional variable to nil.</p>

<p>Swift has features very friendly to functional programming. We think we&rsquo;ll see more and more functional programming paradigms in iOS as time goes on.</p>

<p>Another quick taste of the functional power of Swift.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// this is not possible in Objective-C</span>
</span><span class='line'>
</span><span class='line'><span class="n">numbers</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">number</span> <span class="k">in</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">number</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// but we can do better, we can shorten it even more</span>
</span><span class='line'>
</span><span class='line'><span class="n">numbers</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">$0</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Our summary of the announcements and sessions at WWDC 2014 would be incomplete without a list of highlights. Below are a few of the more significant changes to the tooling, API and end user facing components of iOS and OS X apps.</p>

<h2>Tooling Highlights</h2>

<ul>
<li><strong>Swift</strong> &ndash; a completely new programming language for writing iOS and OS X apps</li>
<li><strong>Swift REPL</strong> &ndash; a command line interactive shell for running Swift code (similar to irb for ruby)</li>
<li><strong>Playgrounds</strong> &ndash; realtime environments for trying out code</li>
<li><strong>View Debugging</strong> &ndash; visual debugging of views and their layout constraints</li>
<li><strong>Universal Storyboards</strong> &ndash; a single storyboard for all screen sizes</li>
<li><strong>Resizable Simulator</strong> &ndash; the iOS simulator can be resized to any size</li>
</ul>


<h2>API Highlights</h2>

<ul>
<li><strong>App Extensions</strong> &ndash; iOS system wide widgets accessible from other apps</li>
<li><strong>UITableView &amp; UICollectionView</strong> &ndash; automatic calculation of table and collection cell size</li>
<li><strong>Size Classes &amp; Trait Collections</strong> &ndash; device &amp; orientation independent handling of user interface size changes</li>
<li><strong>Rotation API deprecation</strong> &ndash; rotation events are deprecated, replaced by size classes</li>
<li><strong>CloudKit</strong> &ndash; structured, cloud based storage in iCloud</li>
<li><strong>SceneKit</strong> &ndash; simple 3D engine now available in iOS</li>
<li><strong>TouchID</strong> &ndash; applications can now access authentication through TouchID on iPhone 5s</li>
<li><strong>UIAlertController</strong> &ndash; Alert views and Action sheets are now full blown view controllers</li>
<li><strong>UISplitViewController</strong> &ndash; now availble on iPhone, one uniform controller for handling master/detail content</li>
<li><strong>HealthKit</strong> &ndash; a framework for managing personal health information</li>
<li><strong>HomeKit</strong> &ndash; a framework for communicating between home automation devices</li>
</ul>


<h2>End User Highlights</h2>

<ul>
<li><strong>iMessage</strong> &ndash; SMS is supported in all iMessage conversations</li>
<li><strong>Handoff</strong> &ndash; users can start an activity on one device and seemlessly transition it to another device</li>
<li><strong>iCloud storage</strong> &ndash; larger buckets of iCloud data can be purchased</li>
<li><strong>Document Picker</strong> &ndash; 3rd party cloud storage providers can offer access to all applications</li>
</ul>


<p>Disagree? Did we miss something? You can reach us both on twitter <a href="https://twitter.com/dave_nix">@dave_nix</a> or <a href="https://twitter.com/sdougherty">@sdougherty</a>. We&rsquo;d love to hear from you.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/28/dependency-injection-for-objective-c/">Dependency Injection for Objective-C</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-28T23:01:00-06:00" pubdate data-updated="true">May 28<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Despite what some <a href="http://david.heinemeierhansson.com/2014/tdd-is-dead-long-live-testing.html">people</a> think, TDD is alive and well. Fast running tests are awesome and breaking dependencies is the key to fast, isolated unit tests. Reliable tests give us the confidence to aggressively clean our code and add new features.</p>

<p>In iOS and OS X it is common to use singleton or singleton style service objects for app wide functionality. Apple provides several of these singleton service objects that are used in most applications. <code>[NSUserDefaults standardUserDefaults];</code> and <code>[NSNotificationCenter defaultCenter];</code> for example.</p>

<p>Both <code>NSUserDefaults</code> and <code>NSNotificationCenter</code> are notoriously painful to isolate in unit tests. <code>NSUserDefaults</code> is challenging because it writes to disk and has the potential of poluting the real running application after the test suite has run and we are back to using the app in the simulator. <code>NSNotificationCenter</code> introduces the possibility of test pollution due to it&rsquo;s global nature. Wouldn&rsquo;t it be nice if we had a system to seemlessly inject fake versions of these in our tests?</p>

<p>We do.</p>

<p>At <a href="http://www.gospotcheck.com">GoSpotCheck</a> we have a mechanism for injecting all of Apple&rsquo;s as well as all of our own singleton style dependencies. When running in the simulator or on a device the real service objects are injected. When the test target is running fake service objects are injected.</p>

<p>The rest of this post will detail out our approach to dependency injection. To keep things easy to understand the example is intentionally simplistic. The sample project <a href="https://github.com/steam/injections">Injections</a> is not organized like our production application and the test suite is XCTest in order to reduce the amount of setup needed to try it out. We use <a href="https://github.com/pivotal/cedar">Cedar</a> and <a href="https://github.com/specta/expecta">Expecta</a> at GoSpotCheck.</p>

<p>The example below shows how to dependency inject a fake <code>AFNetworkReachabilityManager</code> from <a href="https://twitter.com/mattt">Mattt Thompson&rsquo;s</a> fantastic <a href="https://github.com/AFNetworking/AFNetworking">AFNetworking</a> library. AFNetworking is a great network request library for iOS and OS X.</p>

<p><code>AFNetworkReachabilityManager</code> provides hooks for checking on, and being notified of a device&rsquo;s internet connectivity. To unit test online/offline conditional behavior in an app we need to be able control (or fake) the <code>AFNetworkReachabilityManager's</code> reported connection status. This example may seem like a lot of code is required to fake the connection status. That using a mocking framework like <a href="http://ocmock.org/">OCMock</a> might be simpler. It would be. For one off stubbing and mocking OCMock is great. However, in a large production application fakes are usually a better choice in my opinion. Application state is more straightforward with a system of injected fakes than one off mocking, especially for system wide service objects. These techniques are especially useful when unit testing true service objects that make network requests and return deserialized model objects.</p>

<p>Injections is a simple application that displays the device&rsquo;s connection status when launched. Follow the setup below to see it in action.</p>

<p><img src="/images/injections.jpg"></p>

<h2>Setup</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git clone git@github.com:steam/injections.git
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>We&rsquo;ll be looking at a handful of classes and categories.</p>

<p><code>Environment</code> is the class that initializes all the services. In a real application you&rsquo;d see properties for a <code>NSNotificationCenter</code>, <code>NSUserDefaults</code> and all other singleton style service objects here. These will be referenced by the <code>UIViewController+Injections</code> category and made available to all <code>UIViewControllers</code> that want access.</p>

<figure class='code'><figcaption><span>Environment.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@class</span> <span class="nc">AFNetworkReachabilityManager</span>;
</span><span class='line'>
</span><span class='line'><span class="k">@interface</span> <span class="nc">Environment</span> : <span class="nc">NSObject</span>
</span><span class='line'>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">strong</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">,</span> <span class="n">readonly</span><span class="p">)</span> <span class="n">AFNetworkReachabilityManager</span> <span class="o">*</span><span class="n">reachabilityManager</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">+</span> <span class="p">(</span><span class="n">Environment</span> <span class="o">*</span><span class="p">)</span><span class="nf">singleton</span><span class="p">;</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isTestEnvironment</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p>The key part to take note of is <code>-initializeServices</code>. We call <code>[self isTestEnvironment]</code> to determine if we are in the test environment. If <code>- (BOOL)isTestEnvironment</code> returns true then we initialize fake services, otherwise we initialize the real <code>reachabilityManager</code>.</p>

<figure class='code'><figcaption><span>Environment.m</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="p">...</span>
</span><span class='line'><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">initializeServices</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">([</span><span class="n">self</span> <span class="n">isTestEnvironment</span><span class="p">])</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="p">[</span><span class="n">self</span> <span class="nl">performSelector:</span><span class="k">@selector</span><span class="p">(</span><span class="n">initializeFakeServices</span><span class="p">)];</span>
</span><span class='line'>        <span class="k">return</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">reachabilityManager</span> <span class="o">=</span> <span class="p">[</span><span class="n">AFNetworkReachabilityManager</span> <span class="n">sharedManager</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="n">isTestEnvironment</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">[</span><span class="n">self</span> <span class="nl">respondsToSelector:</span><span class="k">@selector</span><span class="p">(</span><span class="n">initializeFakeServices</span><span class="p">)];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="p">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>The magic happens with <code>[self respondsToSelector:@selector(initializeFakeServices)]</code>. In the non-test target this will return false. In the test target it will return true because of the <code>Environment+Fake</code> category imported in <code>ViewControllerTests.m</code>.</p>

<figure class='code'><figcaption><span>Environment+Fake.m</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="cp">#import &quot;Environment+Fake.h&quot;</span>
</span><span class='line'><span class="cp">#import &quot;FakeReachabilityManager.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@implementation</span> <span class="nc">Environment</span> <span class="nl">(Fake)</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">initializeFakeServices</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span> <span class="nl">setValue:</span><span class="p">[</span><span class="n">FakeReachabilityManager</span> <span class="n">sharedManager</span><span class="p">]</span> <span class="nl">forKey:</span><span class="s">@&quot;reachabilityManager&quot;</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>Environment+Fake</code> sets <code>[FakeReachabilityManager sharedManager]</code> as the value for <code>self.reachabilityManager</code>. We&rsquo;ll see below that <code>ViewController</code> will use the fake version of <code>self.reachabilityManager</code> in the test target while using the real <code>reachabilityManager</code> in the non-test target.</p>

<p>The <code>UIViewController+Injections</code> category is in charge of defining methods that returns each of the services we want to expose to our view controllers. In this case <code>reachabilityManager</code> is returned from the <code>Environment</code> singleton object. This method will return either the real or fake version of the <code>reachabilityManager</code> depending on the target.</p>

<figure class='code'><figcaption><span>UIViewController+Injections.m</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">@implementation</span> <span class="nc">UIViewController</span> <span class="nl">(Injections)</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">AFNetworkReachabilityManager</span> <span class="o">*</span><span class="p">)</span><span class="nf">reachabilityManager</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">[</span><span class="n">Environment</span> <span class="n">singleton</span><span class="p">].</span><span class="n">reachabilityManager</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>ViewController</code> uses the <code>reachabilityManager</code> to determine what text to display to the user. If <code>self.reachabilityManger.networkReachabilityStatus</code> is reachable the label&rsquo;s text is set to &ldquo;online&rdquo;, if not then it is set to &ldquo;offline&rdquo;. Take note of the <code>@property (strong, nonatomic) AFNetworkReachabilityManager *reachabilityManager;</code> declaration in the header as well as it&rsquo;s corresponding <code>@dynamic reachabilityManager;</code> in the implementation file. All <code>UIViewController</code> subclasses have access to the <code>UIViewController+Injections</code> category methods which allows them to be set as properties on each <code>ViewController</code> subclass and dynamically evaluated at runtime.</p>

<figure class='code'><figcaption><span>ViewController.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="cp">#import &lt;UIKit/UIKit.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@class</span> <span class="nc">AFNetworkReachabilityManager</span>;
</span><span class='line'>
</span><span class='line'><span class="k">@interface</span> <span class="nc">ViewController</span> : <span class="nc">UIViewController</span>
</span><span class='line'>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">weak</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">UILabel</span> <span class="o">*</span><span class="n">internetStatusLabel</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* &quot;Injected&quot; properties -- Each should have a corresponding @dynamic directive */</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">strong</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">AFNetworkReachabilityManager</span> <span class="o">*</span><span class="n">reachabilityManager</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>ViewController.m</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="cp">#import &quot;ViewController.h&quot;</span>
</span><span class='line'><span class="cp">#import &lt;AFNetworking/AFNetworkReachabilityManager.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@implementation</span> <span class="nc">ViewController</span>
</span><span class='line'>
</span><span class='line'><span class="k">@dynamic</span> <span class="n">reachabilityManager</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span> <span class="n">displayOnlineStatus</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">displayOnlineStatus</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">BOOL</span> <span class="n">reachable</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">reachabilityManager</span><span class="p">.</span><span class="n">networkReachabilityStatus</span> <span class="o">!=</span> <span class="n">AFNetworkReachabilityStatusNotReachable</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">reachable</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">self</span><span class="p">.</span><span class="n">internetStatusLabel</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;online&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">self</span><span class="p">.</span><span class="n">internetStatusLabel</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;offline&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p>The final two pieces of the puzzle are in our test suite. <code>ViewControllerTests.m</code> and <code>FakeReachabilityManager</code> take care of the rest.</p>

<p>First, <code>FakeReachabilityManager</code> provides access to toggling the reported connection status as online or offline.</p>

<figure class='code'><figcaption><span>FakeReachabilityManager.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="cp">#import &quot;AFNetworkReachabilityManager.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@interface</span> <span class="nc">FakeReachabilityManager</span> : <span class="nc">AFNetworkReachabilityManager</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setOffline</span><span class="p">;</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setOnline</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p>By calling <code>-setOffline</code> or <code>-setOnline</code> we&rsquo;re able to override <code>- (AFNetworkReachabilityStatus)networkReachabilityStatus</code> having it return the value of <code>self.fakeStatus</code> set in the <code>-setOffline</code> or <code>-setOnline</code> calls.</p>

<figure class='code'><figcaption><span>FakeReachabilityManager.m</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">@interface</span> <span class="nc">FakeReachabilityManager</span><span class="p">()</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">assign</span><span class="p">)</span> <span class="n">AFNetworkReachabilityStatus</span> <span class="n">fakeStatus</span><span class="p">;</span>
</span><span class='line'><span class="k">@end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">@implementation</span> <span class="nc">FakeReachabilityManager</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setOffline</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">fakeStatus</span> <span class="o">=</span> <span class="n">AFNetworkReachabilityStatusNotReachable</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setOnline</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">fakeStatus</span> <span class="o">=</span> <span class="n">AFNetworkReachabilityStatusReachableViaWWAN</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">AFNetworkReachabilityStatus</span><span class="p">)</span><span class="nf">networkReachabilityStatus</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">fakeStatus</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Finally, we make use of our <code>FakeReachabilityManager</code> in <code>ViewControllerTests.m</code>.</p>

<figure class='code'><figcaption><span>ViewControllerTests.m</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="cp">#import &lt;XCTest/XCTest.h&gt;</span>
</span><span class='line'><span class="cp">#import &quot;Environment+Fake.h&quot;</span>
</span><span class='line'><span class="cp">#import &quot;ViewController.h&quot;</span>
</span><span class='line'><span class="cp">#import &quot;FakeReachabilityManager.h&quot;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">@interface</span> <span class="nc">ViewControllerTests</span> : <span class="nc">XCTestCase</span>
</span><span class='line'>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">strong</span><span class="p">)</span> <span class="n">ViewController</span> <span class="o">*</span><span class="n">controller</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">@implementation</span> <span class="nc">ViewControllerTests</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setUp</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">super</span> <span class="n">setUp</span><span class="p">];</span>
</span><span class='line'>    <span class="n">UIStoryboard</span> <span class="o">*</span><span class="n">storyboard</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIStoryboard</span> <span class="nl">storyboardWithName:</span><span class="s">@&quot;Main&quot;</span> <span class="nl">bundle:</span><span class="nb">nil</span><span class="p">];</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">controller</span> <span class="o">=</span> <span class="p">(</span><span class="n">ViewController</span> <span class="o">*</span><span class="p">)[</span><span class="n">storyboard</span> <span class="n">instantiateInitialViewController</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">controller</span> <span class="n">loadView</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">tearDown</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">super</span> <span class="n">tearDown</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">testOnlineLabelDisplaysOfflineWhenOffline</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">FakeReachabilityManager</span> <span class="o">*</span><span class="n">manager</span> <span class="o">=</span> <span class="p">(</span><span class="n">FakeReachabilityManager</span> <span class="o">*</span><span class="p">)</span><span class="n">self</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">reachabilityManager</span><span class="p">;</span>
</span><span class='line'>    <span class="p">[</span><span class="n">manager</span> <span class="n">setOffline</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">controller</span> <span class="n">viewDidLoad</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">NSString</span> <span class="o">*</span><span class="n">expectedResult</span> <span class="o">=</span> <span class="s">@&quot;offline&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="n">NSString</span> <span class="o">*</span><span class="n">text</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">internetStatusLabel</span><span class="p">.</span><span class="n">text</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">XCTAssertTrue</span><span class="p">([</span><span class="n">text</span> <span class="nl">isEqualToString:</span><span class="n">expectedResult</span><span class="p">],</span> <span class="s">@&quot;Strings are not equal %@ %@&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">expectedResult</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">testOnlineLabelDisplaysOnlineWhenOnline</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">FakeReachabilityManager</span> <span class="o">*</span><span class="n">manager</span> <span class="o">=</span> <span class="p">(</span><span class="n">FakeReachabilityManager</span> <span class="o">*</span><span class="p">)</span><span class="n">self</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">reachabilityManager</span><span class="p">;</span>
</span><span class='line'>    <span class="p">[</span><span class="n">manager</span> <span class="n">setOnline</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">controller</span> <span class="n">viewDidLoad</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">NSString</span> <span class="o">*</span><span class="n">expectedResult</span> <span class="o">=</span> <span class="s">@&quot;online&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="n">NSString</span> <span class="o">*</span><span class="n">text</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">internetStatusLabel</span><span class="p">.</span><span class="n">text</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">XCTAssertTrue</span><span class="p">([</span><span class="n">text</span> <span class="nl">isEqualToString:</span><span class="n">expectedResult</span><span class="p">],</span> <span class="s">@&quot;Strings are not equal %@ %@&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">expectedResult</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p>By toggling our <code>reachabilityManager's</code> online status through the fake we are able to write assertions about the label&rsquo;s text for both online and offline states.</p>

<h2>Summary</h2>

<ul>
<li><code>Environment</code> handles the setup of service objects.</li>
<li><code>Environment+Fake</code> sets fake services in the test target.</li>
<li><code>UIViewController+Injections</code> provides service access to <code>UIViewControllers</code>.</li>
<li><code>@dynamic</code> accessors makes this possible.</li>
<li><code>ViewControllerTests.m</code> is able to use the fake service object and control the external dependency.</li>
</ul>


<p>As I mentioned above, this example feels like overkill for this particular use case due to the simplicity of the app. In practice however this technique makes it possible to have fine grain control over a host of complicated services and objects. When your app has hundreds of classes and thousands of tests you&rsquo;ll see your hard work paid back many times over. The tests will run fast and predictably (our current test suite takes under 15 seconds to run ~1400 tests). TDD and near complete test coverage can only happen when you have confidence in the test suite and you can execute them fast enough to do it often. Breaking dependencies on asynchronous code and hard to control state is crucial.</p>

<p>Approach this in a different way? Completely disagree? Love the technique? Reach out and let me know on twitter <a href="https://twitter.com/sdougherty">@sdougherty</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/17/android-vs-ios-from-an-ios-developers-perspective/">Android vs iOS From an iOS Developer&#8217;s Perspective</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-17T15:48:00-06:00" pubdate data-updated="true">May 17<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Over the last month or so I&rsquo;ve been spending my days learning Java and Android development. As an iPhone user I find myself trying to make sense of Android apps through the lens of years of iPhone use. I realized that I needed to be a real Android user. Much to the dismay of most people who know me I visited the Google Play store and bought a Nexus 5. After receiving the Nexus I went to AT&amp;T to get a micro-SIM and I made the switch.</p>

<h3>Observations</h3>

<p>The first surprise was the price. Unlocked, no contract, no carrier commitment: $350. The last time I purchased an unlocked iPhone it set me back $950. Why are Android devices so inexpensive?</p>

<p>The second surprise was the quality of the software experience. I&rsquo;ve had various Android devices over the years for testing purposes but they all seemed cheap and clunky. The Nexus 5 runs vanilla KitKat and it is years beyond older versions in every way. I liked the lack of manufacturer kludge as well. My Samsung Galaxy S2 testing phone was highly customized by Samsung and felt clunky. Vanilla KitKat comes close to matching iOS 7&rsquo;s finish in many areas and <gasp> surpasses it in many others. Gone are the days of Android trailing far behind iOS in functionality and experience. KitKat is polished and mature feeling.</p>

<p>Most of the apps I use on a daily basis, Spotify, Twitter, Facebook, Circa, Pocket, Fliboard, Zite and NPR News are all first class citizens on Android. Aside from a hellish logging-in-to-all-the-things experience my digital life ported over nicely. The Gmail app worked great. Hangouts was mildly confusing but ultimately worked well for texts and instant messaging. The experience also gave me the excuse to move my wife&rsquo;s calendar and my calendar from iCloud over to Google Calendar. Since we both use Gmail it was something I&rsquo;d been meaning to do for awhile.</p>

<h3>Love</h3>

<p>The best feature of Android is the back button. Navigating between apps is seamless. Its hard to explain this feature to an iPhone user. It doesn&rsquo;t sound that sexy but oh man, it is sexy. The flow of jumping from one app to another and tapping back to jump between apps is such a better flow than the iPhone&rsquo;s app switching. It just feels more natural and useful.</p>

<p>Another feature of the Nexus that I loved was the screen size. At just under 5&#8221; the screen is big and beautiful. The full 1080p screen has room for much more content then an iPhone 5s. I hope the rumors are true about larger iPhones coming this fall.</p>

<p>Google clearly excels at cloud services. The thoroughness and reliability of their offering is impressive. Their services cover almost all possible needs and are available everywhere. The portability of using Google&rsquo;s services over Apple&rsquo;s gated ecosystem is attractive. Gmail, Google Drive and Hangouts are as reliable as anything else out there and considerably more reliable than Apple&rsquo;s several attempts at cloud based services.</p>

<p>Google Now was a nice surprise. It is integrated directly into the OS and is incredibly useful. Being able to configure Google Now along with it&rsquo;s learned behavior made my experience with the device personal and contextual.</p>

<p>Android has the concept of widgets, small subsets of an app&rsquo;s features that are installable on the phone&rsquo;s home screens. The two widgets I actually used displayed the current weather and another that launched a specific Dropbox folder. Due to a great architectural decision in Android it is possible to deep link into apps all the time. Deep linking is a must have feature for future version&rsquo;s of iOS. The productivity gains from going directly to the area of an app you need are huge.</p>

<h3>Hate</h3>

<p>While the Android Apps I used had come a long way since they were first introduced some aspects of the experience felt less refined than on iOS. For example, the lack of rubber banding on scrolling lists felt off and unnatural.</p>

<p>The first pain point came when I stopped receiving &ldquo;texts&rdquo; from all my iPhone friends. These were of course iMessages and Apple&rsquo;s servers failed to release my phone number and start sending standard sms texts instead of iMessage. While not a problem caused by Android this drove me insane. I have several Apple products connected to iMessage; my mac book pro, multiple iPads and my iPhone 5s. Turning off iMessage for my phone number did not fix the problem. Apparently I am not the only one who has had to deal with this: <a href="http://adampash.com/imessage-purgatory/">iMessage purgatory</a>.</p>

<p>After the whole text/iMessage fiasco (Apple&rsquo;s fault for sure) the next biggest challenge was visual voicemail. AT&amp;T has an Android App for visual voicemail. Despite a good hour of trying and another hour on the phone with AT&amp;T I never got visual voicemail working. Its amazing how fast certain features become expected. Using a smartphone to call and retreive my voicemails felt antiquated and frustrating. Android users have since told me that Google Voice is the best app to use for visual voicemail. I never tried it unfortunately.</p>

<h3>Conclusion</h3>

<p>I found the entire experience to be less cohesive than iOS. I&rsquo;m not sure if the problem is too much choice or if it is just a maturity issue but I didn&rsquo;t open the box, turn it on and have a smooth, working smart phone. The experience was impressive and the phone was beautiful but somehow the combination of all the parts did not add up to something greater than the whole. Apple consistently nails this.</p>

<p>How long did I use the Nexus 5 as my primary phone? 5 days. I&rsquo;m back on the iPhone and I don&rsquo;t miss the Nexus much. I am glad for the experience though. When I work in Android now I have a much clearer idea of what users expect. iOS users and Android users should and do expect a different experience. The interaction is different so our applications should match those expected interactions. Google has done some amazing work in a very short amount of time. Apple has some work to do if they&rsquo;re going to remain competitive with Android.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
   
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:steam.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
  
    <section>  
  <h1>About Me</h1>
  <img src="/assets/sean.jpg">
  <p>I am a mobile software engineer living in Denver Colorado. I spend my time writing code, mostly Swift, hanging out with my wife and 3 boys, injuring myself while running and coaching my kids&#8217; soccer teams.</p>
	<p>I am currently the Mobile Lead working with the awesome folks at <a href="http://ello.co">Ello</a>.</p>
</section>
<section>
  <div>
    <p><br />Come say hi at Ello</p>
    <p><iframe class='button' frameborder='0' border='0' scrolling='no' allowtransparency='true' height='40' width='40' src='https://button.ello.co/button?color=black&username=sean&size=large'></iframe></p>
  </div>
</section>

<section>
  <div>
    <p><br /><a href="http://twitter.com/sdougherty">My Tweets, on Twitter.</a></p>
    <a href="http://twitter.com/sdougherty" class="twitter-follow-button" data-show-count="">Follow @sdougherty</a>
  </div>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/10/02/i-suck-at-git/">I Suck at Git</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/06/23/animate-between-competing-constraints/">Animate Between Competing Constraints</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/06/22/open-sourcing-ellos-ios-app/">Open Sourcing Ello&#8217;s iOS App</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/05/31/big-o-notation/">Big-O Notation</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/31/more-functional-please/">More Functional Please</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Sean Dougherty <br/>
  This site is <a href="https://github.com/steam/steam.github.io">Open Source</a>, feel free to <a href="https://github.com/steam/steam.github.io/issues">open an issue</a> or submit a <a href="https://github.com/steam/steam.github.io/pulls">pull request</a>.
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script>
  $(document).ready(function() {  
  var stickyNavTop = $('nav').offset().top;  
    
  var stickyNav = function(){  
  var scrollTop = $(window).scrollTop();  
         
  if (scrollTop > stickyNavTop) {   
      $('nav').addClass('sticky');  
  } else {  
      $('nav').removeClass('sticky');   
  }  
  };  
    
  stickyNav();  
    
  $(window).scroll(function() {  
      stickyNav();  
  });  
  });  
</script>


</body>
</html>
